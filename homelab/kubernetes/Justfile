#!/usr/bin/env just --justfile

# Kubernetes ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
# ì‚¬ìš©ë²•: just <command>

# ë„ì›€ë§ í‘œì‹œ
_default:
    @just --list

# ============================================================
# Infrastructure ëª¨ë“ˆ
# ============================================================

# NFS Provisioner ê´€ë¦¬
mod nfs 'infrastructure/nfs-provisioner'

# ============================================================
# Applications ëª¨ë“ˆ
# ============================================================

# SigNoz ëª¨ë‹ˆí„°ë§ ê´€ë¦¬
mod signoz 'applications/signoz'

# Kubeflow ê´€ë¦¬
mod kubeflow 'applications/kubeflow'

# ============================================================
# ì „ì²´ ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸
# ============================================================

# ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒíƒœ í™•ì¸
[group('ì „ì²´')]
status-all:
    @echo "=== All Namespaces ==="
    kubectl get namespaces
    @echo "\n=== All Pods ==="
    kubectl get pods -A
    @echo "\n=== All Services ==="
    kubectl get svc -A
    @echo "\n=== Storage Classes ==="
    kubectl get storageclass

# ëª¨ë“  Helm releases í™•ì¸
[group('ì „ì²´')]
helm-list:
    @echo "=== All Helm Releases ==="
    helm list -A

# ============================================================
# ë¹ ë¥¸ ì ‘ê·¼ ëª…ë ¹ì–´
# ============================================================

# NFS Provisioner ì„¤ì¹˜
[group('ë¹ ë¥¸ì ‘ê·¼')]
install-nfs:
    @echo "ğŸ“ NFS Provisioner ì„¤ì¹˜..."
    cd infrastructure/nfs-provisioner && just install

# SigNoz ì„¤ì¹˜
[group('ë¹ ë¥¸ì ‘ê·¼')]
install-signoz:
    @echo "ğŸ“Š SigNoz ì„¤ì¹˜..."
    cd applications/signoz && just install

# Kubeflow ì„¤ì¹˜
[group('ë¹ ë¥¸ì ‘ê·¼')]
install-kubeflow:
    @echo "ğŸ¤– Kubeflow ì„¤ì¹˜..."
    cd applications/kubeflow && just install
